<app-header></app-header>
<div class="layout-2cols">
    <div class="content grid_8">
        <div class="project-detail">
            <div class="project-tab-detail tabbable accordion">
                <ul class="nav nav-tabs clearfix">
                    <!-- <li class="active">
                        <a href="#">Profile</a>
                    </li>
                    <li>
                        <a href="#" class="be-fc-orange">Account</a>
                    </li>
                    <li class="disable">
                        <a href="#" class="be-fc-orange">Notifications</a>
                    </li>
                    <li>
                        <a href="#" class="be-fc-orange">Inbox</a>
                    </li> -->
                    <li class="active">
                        <a class="be-fc-orange">Create spending requests here</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div>
                        <h3 class="rs alternate-tab accordion-label">Projects</h3>
                        <div class="tab-pane accordion-content active">
                            <div class="box-marked-project project-short inside-tab" *ngFor="let project of my_projects;let i=index">
                                <div class="top-project-info">
                                    <div class="content-info-short clearfix">
                                        <a class="thumb-img">
                                            <img src={{project.img}} alt="Product Image">
                                        </a>
                                        <div class="wrap-short-detail">
                                            <h3 class="rs acticle-title">
                                                <a class="be-fc-orange">{{project.title}}</a>
                                            </h3>
                                        </div>
                                        <div class="wrap-short-detail">
                                            <p class="rs acticle-title" style="font-size: 90%">
                                                {{project.description}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--end: .top-project-info -->
                                <div class="bottom-project-info clearfix">
                                    <div class="group-fee clearfix">
                                        <div class="fee-item">
                                            <button type="button" class="btn btn-primary" data-toggle="modal" [attr.data-target]="'#modal'+i">
                                                Create Request
                                            </button>
                                        </div>
                                        <div class="sep"></div>
                                        <div class="fee-item">
                                            <p class="rs lbl">Bankers</p>
                                            <span class="val">{{project.bankers}}</span>
                                        </div>
                                        <div class="sep"></div>
                                        <div class="fee-item">
                                            <p class="rs lbl">Pledged</p>
                                            <span class="val">{{project.pledged}}</span>
                                        </div>
                                        <div class="sep"></div>
                                        <div class="fee-item">
                                            <p class="rs lbl">Days Left</p>
                                            <span class="val">{{project.days}}</span>
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                        <!--end: .tab-pane -->
                    </div>
                </div>
            </div>
            <!--end: .project-tab-detail -->
        </div>
    </div>
    <!--end: .content -->
    <div class="sidebar grid_4">
        <div class="box-gray project-author">
            <h3 class="title-box">{{user_name}}</h3>
            <div class="media">
                <div class="media-body">
                    <p class="rs fc-gray">{{proj_number}} projects</p>
                </div>
            </div>
        </div>
        <!--end: .project-author -->
    </div>
    <!--end: .sidebar -->
    <div class="clear"></div>
</div>
<div class="container" *ngFor="let project of my_projects;let i=index">
    <!-- The Modal -->
    <div class="modal" [attr.id]="'modal'+i">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h5 class="modal-title">Provide description and amount you want to spend for it. </h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <form #f="ngForm" (ngSubmit)="createRequest(f,project.address)">
                    <div class="form-group">
                        <label for="description">Describe your spending need</label>
                        <textarea class="form-control" ngModel required name="description" id="description" #description="ngModel" rows="3"></textarea>
                        <div class="form-control alert-danger" *ngIf="description.invalid && description.touched">Invalid entry</div>
                    </div>
                    <div class="form-group">
                        <label for="value">Funds needed</label>
                        <input type="number" class="form-control" ngModel required name="value" id="value" #value="ngModel" />
                        <div class="form-control alert-danger" *ngIf="value.invalid && value.touched">Invalid entry</div>
                    </div>
                    <div class="form-group">
                        <label for="recipient">Recipient Address</label>
                        <input type="text" class="form-control" ngModel required name="recipient" id="recipient" #recipient="ngModel" />
                        <div class="form-control alert-danger" *ngIf="recipient.invalid && recipient.touched">Invalid entry</div>
                    </div>
                    <button class="btn btn-primary" [disabled]="!f.valid" type="submit">Submit</button>
                </form>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

</div>

<app-footer></app-footer>